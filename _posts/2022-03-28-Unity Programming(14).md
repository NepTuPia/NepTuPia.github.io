# 2D 러너 게임 '유니런' 제작 - 플레이어 제작(1)

출판사에서 제공하는 프로젝트 파일을 열어서 시작해보자. 11번째 폴더안에 있는 'Uni-run' 파일을 Unity hub에 불러와서 열면 된다. 

해당 파일안에는 유니런 게임 제작에 필요한 여러 소스들이 들어가있다. 이 소스들을 활용해 스타일리시 스프린트같은 2D 러너 게임인 유니런을 만들어보자!

## 시작지점 만들기 

우선 플레이어가 게임을 시작할 시작점과 게임이 끝나는 데드존을 만들어 배치하자.

**1. 시작지점 제작**

시작지점은 미리 포함된 스프라이트(Sprite) 에셋을 활용하자. 스프라이트 에셋은 2D 그래픽과 UI를 그릴때 사용하는 텍스쳐(이미지 파일)이다. 스프라이트 에셋을 하이어라키 창으로 끌어오면 해당 스프라이트를 사용하는 '스프라이트 랜더러(Sptrite Renderer)' 컴포넌트가 추가된 게임 오브젝트가 생성된다. 

'Platform_Long' 이름의 스프라이트를 오브젝트로 추가하고 적절한 위치에 배치한 뒤 'Box collider 2D' 컴포넌트를 추가하자. 플레이어가 게임을 시작하고 발판위에 있을려면 반드시 콜라이더 컴포넌트가 있어야 한다. 2D 게임이므로 2D가 붙은 콜라이더를 사용해주자!

**2. 데드존 제작**

데드존은 플레이어가 발판에 착지하지 못하고 화면 밖으로 떨어졌을 경우 사망처리를 담당할 구역이다. 

시작지점같은 발판은 플레이어와의 충돌을 감지함과 동시에 물리적 상호작용까지 더해 플레이어가 딛고 서있을 수 있어야하지만 데드존은 충돌만 감지하면 되므로 트리거 콜라이더를 사용해 구현한다.

Empty 오브젝트를 추가하고 시작지점처럼 Box Collider 2D 컴포넌트를 추가해주되, 'On Trigger' 칸을 체크해 트리거 콜라이더로 작동하게 하고 적절하게 배치하자

![image](https://user-images.githubusercontent.com/68016394/160403020-88828b39-05ea-4ab9-86ed-e9758329c756.png)

<p align = "center">
생성된 시작 발판과 데드존

#플레이어 캐릭터 스프라이트 편집

이제 플레이어가 조작할 캐릭터의 스프라이트를 편집해보자. 아까 플랫폼 스프라이트가 있던 폴더에 가보면 캐릭터의 점프, 달리기, 사망에 대한 스프라이트 파일이 있다

유니티에선 2D 프로젝트에서 이미지를 기본적으로 싱글 스프라이트로 가져온다. 이 싱글 스프라이트를 멀티플 스프라이트로 설정하면 개발자 임의대로 나누어 여러개의 스프라이트로 잘라 사용할 수 있다

제공받은 스프라이트는 싱글 스프라이트로, 하나의 스프라이트에 여러 이미지 파일이 일렬로 담겨있으니 멀티플 스프라이트로 설정해 나누어 캐릭터 애니매이션을 만들어보자

![image](https://user-images.githubusercontent.com/68016394/160433505-37b0baa2-3b75-418d-b60a-23c8830133e3.png)

<p align = "center">

스프라이트 파일을 선택하고 Inspector 창을 보면 스프라이트 모드를 설정할 수 있다. Single로 되어있던 것을 Multiple로 설정하자. 그리고 Sprite Editor을 클릭하면 이제 개발자 임의대로 스프라이트를 편집할 수 있다

![image](https://user-images.githubusercontent.com/68016394/160433899-99770e33-0d75-4d5e-b2c8-78f7dfb5dd72.png)

<p align = "center">

에디터창에서 위의 그림대로 창을 연 뒤, Type을 'Grid by Cell Size'로 선택하면 일정한 간격으로 스프라이트를 자를 수 있다. 알맞게 설정한 뒤 Slice버튼을 누르면 아래처럼 하나의 스프라이트가 여러개의 개별 스프라이트로 잘라졌다. 다 잘랐다면 Apply 버튼을 눌러 저장한 뒤 창을 닫자. 

마찬가지로 다른 스프라이트들도 알맞게 잘라주면 캐릭터를 만들기 위한 스프라이트 사전 작업은 끝났다. 

##2D 캐릭터 오브젝트 준비

이제 플레이어가 조작할 2D 캐릭터를 오브젝트로 추가해 준비하자. 
캐릭터 오브젝트가 할 기능은 다음과 같다.

1. 게임 내에서 물리 상호작용
2. 조작을 감지하고 점프
3. 사망
4. 애니메이션 재생과 제어
5. 효과음 재생

TokoRun 스프라이트 파일을 잘라 만든 TokoRun(0)을 기본 캐릭터 스프라이트로 사용할 것이다. 해당 파일을 하이어라키창에 넣으면 캐릭터 오브젝트가 생성된다. 생성된 오브젝트의 Tag를 'Player'로 설정해주고 적절한 위치에 배치하자

![image](https://user-images.githubusercontent.com/68016394/160436275-9d6f1a83-b84e-4706-966c-64ab2852b4ef.png)

<p align="Center">
  
캐릭터 스프라이트를 오브젝트로 배치

캐릭터는 중력의 영향을 받아야하므로 Rigidbody 2D 컴포넌트를 추가해주자. 발판과의 충돌은 항상 감지해야 하므로 'Collision Detection'을 'Continous'로 변경해주고, 'Constraints' 드랍다운 메뉴를 펼쳐 'Freeze Rotation'의 Z축을 체크해 Z축을 고정해주자. 

다음에는 콜라이더 2D 콤포넌트를 추가해 충돌을 감지할 수 있도록 하자. 다만 기존에 사용하던 네모난 모양의 Box Collider가 아니라 둥그런 'Circle Collider 2D'를 사용할 것이다. 이렇게하면 발판의 각진 모서리에 착지했을 때 부드럽게 올라가게 할 수 있다. 'Offset'을 (0, -0.57)로 설정해 캐릭터의 하단에 콜라이더가 오도록 하고 'Radious'를 0.2로 설정해 충돌 감지 범위를 조정하자

![image](https://user-images.githubusercontent.com/68016394/160437482-4e73d0c0-bd86-422e-85d2-5ee49e87505a.png)

<p align="Center">
  
리지드바디 및 콜라이더 컴포넌트 설정 완료

마지막으로 캐릭터가 소리를 낼 수 있도록 만들자. 캐릭터 오브젝트의 컴포넌트로 'Audio Source' 컴포넌트를 추가하고, 'AudioClip' 필드 옆의 선택창에서 jump 오디오 클립 파일을 선택해 넣어주자. 오디오 클립 파일은 제공받은 에셋에 있을 것이다. 오디오 소스 컴포넌트는 소리를 재생하는 역할을 하는 'CD 플레이어'의 역할을 한다. 실제로 소리를 재생하려면 CD 플레이어 안에 CD를 넣어야하듯이 컴포넌트 안에 실제 오디오 클립을 넣어줘야 한다.  

마지막으로 'Play On Awake' 체크를 해제해주자. 해당 옵션은 처음 오브젝트가 활성화될 때 소리를 내게 하는데 점프할때만 소리가 나면 되므로 해제해주는 것이다. 

![image](https://user-images.githubusercontent.com/68016394/160438367-ab6fc3e1-9fb3-49d4-bd69-a95b889a4341.png)

<p align="Center">

오디오 소스 컴포넌트 설정 완료

**오디오 리스너(Audio Listner)**

게이머의 귀를 대표해 게임월드 안에서 오브젝트가 내는 소리를 듣는 '오디오 리스너'가 존재한다. 이것이 없다면 오브젝트가 소리를 내고 게이머가 듣는다고 해도 게임월드가 소리를 인식하지 못한다. 오디오 리스너는 게임월드상에 동시에 1개밖에 존재할 수 없다. '한명의 플레이어가 여러 장소의 소리를 동시에 듣는' 비현실적인 상황을 방지하기 위해서이다. 

기본적으로 추가되는 오브젝트인 'Main Camera' 오브젝트에 오디오 리스너 컴포넌트가 자동으로 추가되어 있다. 그러므로 따로 추가해 줄 필요는 없다!

![image](https://user-images.githubusercontent.com/68016394/160439038-0f038984-4f4b-454e-85cf-e4ca05d8523c.png)

<p align="Center">
메인카메라 오브젝트에 존재하는 오디오 리스너 컴포넌트

