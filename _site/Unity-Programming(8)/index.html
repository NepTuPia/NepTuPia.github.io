<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Unity programming(8) - Footprints</title>
<meta name="description" content="탄막 슈팅 게임 ‘닷지’ - 탄알 제작">


  <meta name="author" content="Kim Namsub">
  
  <meta property="article:author" content="Kim Namsub">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Footprints">
<meta property="og:title" content="Unity programming(8)">
<meta property="og:url" content="http://localhost:4000/Unity-Programming(8)/">


  <meta property="og:description" content="탄막 슈팅 게임 ‘닷지’ - 탄알 제작">







  <meta property="article:published_time" content="2022-02-16T00:00:00+09:00">





  

  


<link rel="canonical" href="http://localhost:4000/Unity-Programming(8)/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Kim Namsub",
      "url": "http://localhost:4000/"
    
  }
</script>







<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Footprints Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          Footprints
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="https://mmistakes.github.io/minimal-mistakes/docs/quick-start-guide/">Quick-Start Guide</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person" class="h-card">

  

  <div class="author__content">
    <h3 class="author__name p-name" itemprop="name">
      <a class="u-url" rel="me" href="http://localhost:4000/" itemprop="url">Kim Namsub</a>
    </h3>
    
      <div class="author__bio p-note" itemprop="description">
        <p>Music, Outworks, Drinks and <strong>Develpment</strong></p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name" class="p-locality">Seoul, Republic of Korea</span>
        </li>
      

      
        
          
            <li><a href="sub64886488@gmail.com" rel="nofollow noopener noreferrer me"><i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i><span class="label">Email</span></a></li>
          
        
          
        
          
        
          
        
          
        
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer me">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>
  
  </div>



  <article class="page h-entry" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Unity programming(8)">
    <meta itemprop="description" content="탄막 슈팅 게임 ‘닷지’ - 탄알 제작">
    <meta itemprop="datePublished" content="2022-02-16T00:00:00+09:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title p-name" itemprop="headline">
            <a href="http://localhost:4000/Unity-Programming(8)/" class="u-url" itemprop="url">Unity programming(8)
</a>
          </h1>
          

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          3 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content e-content" itemprop="text">
        
        <h1 id="탄막-슈팅-게임-닷지---탄알-제작">탄막 슈팅 게임 ‘닷지’ - 탄알 제작</h1>

<hr />

<h1 id="탄알-생성기-준비">탄알 생성기 준비</h1>

<p>탄알 오브젝트가 준비되었으므로 탄알 생성기를 만들어보자. 탄알 생성기 게임 오브젝트는 랜덤한 시간 간격으로 탕알을 생성해 플레이어를 향해 발사한다. 탄알 생성기의 기능은 다음과 같다.</p>

<ol>
  <li>붉은 원기둥 모양</li>
  <li>랜덤한 시간 간격으로 탄알 생성</li>
  <li>Bullet 프리팹을 원본으로 탄알을 생성</li>
  <li>플레이어를 향하도록 탄알을 생성</li>
</ol>

<p>원기둥(Cylinder) 오브젝트 생성 및 색깔 설정은 건너뛰겠다.</p>

<p align="center">
<img width="1284" alt="image" src="https://user-images.githubusercontent.com/68016394/154257510-820044ba-5975-47ef-ac63-480b6722d585.png" />
원기둥 오브젝트 생성 및 머티리얼 설정 - Bullet Spawner
</p>

<p>이제 탄알 생성기를 위한 스크립트를 만들어보자.</p>

<p><strong>탄알 생성기 스크립트 만들기</strong></p>

<p>탄알 생성기는 기능을 하기 위해 다음과 같은 변수들이 필요하다.</p>

<ol>
  <li>생성할 탄알의 원본 - 프리팹</li>
  <li>탄알을 발사하여 맞출 대상</li>
  <li>탄알을 생성하는 시간 간격</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class BulletSpawner : MonoBehaviour{
    public GameObject bulletPrefab; //생성할 탄알의 원본 프리팹
    public float spawnRateMin = 0.5f; //최소 생성 주기
    public float spawnRateMax = 3f; //최대 생성 주기

    private Transform target; //발사할 대상
    private float spawnRate; //생성 주기
    private float timeAfterSpawn; //최근 생성 시점에서 지난 시간

    void Start(){
        
    }

    void Update(){
        
    }
}
</code></pre></div></div>

<p>위와 같이 변수들을 선언하고 스크립트를 만들 준비를 해두자.</p>

<p><strong>Start() 메서드</strong></p>

<p>Start() 메서드는 발사를 위한 준비를 해야 한다. 그러므로 시간에 대한 초기화와 발사 목표인 플레이어 오브젝트를 불러와야 한다.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>void Start(){
    //최근 생성 이후의 누적 시간을 0으로 초기화
    timeAfterSpawn = 0f;
    //탄알 생성 간격을 spawnRateMin과 spawnRateMax 사이에서 랜덤 지정
    spawnRate = Random.Range(spawnRateMin, spawnRateMax);
    //PlayerController 컴포넌트를 가진 게임 오브젝트를 찾아 조준 대상으로 지정
    target = FindObjectOfType&lt;PlayerController&gt;().transform;
}
</code></pre></div></div>

<p>마지막 코드를 잘 살펴보자. FindObjectOfType&lt;&gt;() 메서드는 &lt;&gt;안에 명시된 타입의 오브젝트를 찾아 접근하는 메서드다. 플레이어는 PlayerController라는 이름이 스크립트를 컴포넌트로 가지고 있다. 스크립트명은 클래스명과 같으므로 즉 타입 이름과 같다. PlayerController라는 컴포넌트(타입)을 지닌 오브젝트에 접근해 해당 오브젝트의 transform 값을 가져와 transform 타입의 target 변수에 대입해 탄알을 조준할 수 있도록 하는 것이다.</p>

<p>다만 FindObjectOfType&lt;&gt;() 메서드는 씬 내의 모든 오브젝트를 탐사하기에 비용이 큰 메서드이다. 그러므로 Start() 같은 한두번 실행되는 메서드 내에서 사용해야한다. Update() 같은 메서드 내에서 사용하면 심각하게 느려질 수도 있다.</p>

<p>FindObjectsOfType&lt;&gt;() 메서드도 있다. Objects라는 메서드명에서 알 수 있듯이 모든 오브젝트를 찾아 배열로 반환한다.</p>

<p><strong>일정 주기로 실행 반복하기</strong></p>

<p>Update() 메서드를 활용해 탄알을 생성할 것이다. 그러나 그대로 사용하면 1초에 수십개의 탄알이 발사되므로 난이도가 너무 어려워진다. 이를 해결하기 위해 마지막으로 탄알이 생성된 시간을 체크하는 timeSpawnRate 변수를 활용한다.</p>

<p>timeAfterSpawn 값은 시간의 흐름에 맞춰 증가한다. 주기적으로 현재 timeAfterSpawn 변수값을 체크해서 탄알 생성 주기보다 커진 순간 탄알을 생성하고 timeAfterSpawn을 0으로 리셋한다. 이를 반복하면 일정 주기로 총알을 발사할 수 있다. 이때 필요한것이 Update() 메서드의 실행 시간 간격이다.</p>

<p><strong>Update() 메서드의 실행 시간 간격</strong></p>

<p>Update() 메서드는 앞에서 배웠던대로 화면의 갱신 시 마다 실행된다. 따라서 직전 Update()의 실행과 현재 Update()의 실행 사이의 시간 간격이 한 프레임을 그리는데에 소요되는 시간이다.</p>

<p>Time.deltaTime 메서드를 사용하면 프레임 사이의 시간 간격이 자동으로 할당되어 사용할 수 있다. 60FPS의 컴퓨터에서는 1/60이 되고 120FPS의 컴퓨터에서는 1/120이 된다. 그러므로 Update() 메서드에서 변수에 Time.deltaTime을 누적해서 더해가면 시간을 계산할 수 있다.</p>

<p><strong>Instantiate() 메서드</strong></p>

<p>탄알을 복제하는데 Instantiate() 메서드를 사용할 것이다. 유니티에서 게임 플레이중 실시간으로 오브젝트를 생성하는데에 사용하는 메서드이다.</p>

<p>`
Instantiate(원본, 위치, 회전);
`</p>

<p>위의 코드처럼 원본을 파라미터로 넣으면 해당 원본을 본딴 오브젝트를 생성한다. 즉, 클래스에서 객체를 찍어내는 것이다! (인스턴스화). ‘위치’와 ‘회전’ 파라미터도 넣어서 실행하면 생성할 위치와 회전 정도도 지정할 수 있다.</p>

<p>이제 위의 내용을 바탕으로 Update() 메서드를 완성해보자.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>void Update(){
    //timeAfterSpawn 갱신
    timeAfterSpawn += Time.deltaTime;

    //최근 생성 시점에서부터 누적된 시간이 생성 주기보다 크거나 같다면 실행
    if (timeAfterSpawn &gt;= spawnRate){
        //누적된 시간 리셋
        timeAfterSpawn = 0;

        //총알 생성, 만들어둔 탄알 프리팹을 원본으로 쓰고 탄알생성기 자신의 위치와 회전 정도를 동일하게 탄알에게 줌
        GameObject bullet = Instantiate(bulletPrefab, transform.position, transform.rotation);
        //생성된 bullet 게임 오브젝트의 정면 방향이 target(플레이어)를 향하도록 설정
        bullet.transform.LookAt(target);
        //다음 생성 간격을 랜덤하게 다시 설정
        spawnRate = Random.Range(spawnRateMin, spawnRateMax);
    }
}
</code></pre></div></div>

<p>마지막에 쓰인 LootAt() 메서드는 해당 방향으로 오브젝트의 Rotation을 변경한다.</p>

<p>제일 마지막에 생성 간격도 다시 랜덤하게 설정하기에 보다 더 불규칙적으로 탄알을 생성할 수 있다.</p>

<p>이를 이제 저장하고 bulletSpawner 오브젝트에 적용해보자.</p>

<p align="center">
<img width="1678" alt="image" src="https://user-images.githubusercontent.com/68016394/154274969-7ba7fd35-ec49-48b7-ac6b-b398ffeb4ff2.png" />
완성된 탄알 생성기
</p>

<p>bulletSpawner 오브젝트에 스크립트를 컴포넌트로 추가했다면 bullet Prefab에 할당될 오브젝트를 Asset의 Bullet 프리팹으로 설정해주기까지 완료하자. (상단 그림의 우측 하단)</p>

<h1 id="완성">완성!</h1>

<p>자 이제 총알생성기를 상하좌우 4개 모든곳에 설치해주자. 프리팹으로 만들어뒀으므로 간단하게 이미 만들어준 총알생성기를 복제해서 설치할 수 있다. Position 좌표만 수정해 적절한 위치에 두고 씬을 플레이해보자.</p>

<p align="center">
<img width="1285" alt="image" src="https://user-images.githubusercontent.com/68016394/154928386-acc7ddf8-3a89-42be-9dd8-73730366d10b.png" />
완성!
</p>

<p>넘모 재밌고? 근데 갸어려움</p>

<h1 id="요약">요약</h1>

<ol>
  <li>게임 오브젝트를 프리팹(Prefab)으로 만들어 재활용할 수 있다.</li>
  <li>리지드바디 컴포넌트의 Use Gravity 필드를 해제하면 중력의 영향을 받지 않는다.</li>
  <li>변수 transform은 스크립트에서 자신의 트랜스폼 컴포넌트로 바로 접근하는 지름길이다.</li>
  <li>Destroy() 메서드는 주어진 오브젝트를 파괴하고 두번째 파라미터로 파괴 지연시간을 설정할 수 있다.</li>
  <li>트리거 콜라이더는 충돌은 감지하되 상대방 콜라이더를 밀어내지 않는다.</li>
  <li>OnTriggerEnter(), OnCollisionEnter() 메서드로 충돌을 감지할 수 있다.</li>
  <li>OnCollisionEnter()은 일반 충돌 시 자동으로 실행된다.</li>
  <li>OnCollisionStay(), OnCollisionExit()으로 각각 충돌하는 동안과 충돌을 마칠 때를 감지할 수 있다.</li>
  <li>OnTriggerEnter()은 트리거 충돌시에 자동으로 실행된다.</li>
  <li>OnTriggerStay(), OnTriggerExit()으로 각각 트리거로 충돌하는 동안과 충돌을 마칠 때를 감지할 수 있다.</li>
  <li>충돌한 상대방 게임 오브젝트를 태그로 식별할 수 있다.(플레이어 오브젝트는 우리가 태그로 Player로 지정했었다!)</li>
  <li>FindObjectOfType()은 씬에 있는 모든 오브젝트를 검색하여 원하는 타입의 오브젝트를 가져온다.</li>
  <li>Instantiate() 메서드는 입력한 원본 오브젝트의 복제본을 생성한다.</li>
</ol>


        
      </section>

      <footer class="page__meta">
        
        


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2022-02-16T00:00:00+09:00">February 16, 2022</time></p>

      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?text=Unity+programming%288%29%20http%3A%2F%2Flocalhost%3A4000%2FUnity-Programming%288%29%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A4000%2FUnity-Programming%288%29%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Flocalhost%3A4000%2FUnity-Programming%288%29%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/Unity-Programming(7)/" class="pagination--pager" title="Unity programming(7)
">Previous</a>
    
    
      <a href="/Unity-Programming(9)/" class="pagination--pager" title="Unity programming(9)
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h2 class="page__related-title">You may also enjoy</h2>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/Unity-Programming(12)/" rel="permalink">Unity programming(12)
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          6 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">벡터
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/Unity-Programming(11)/" rel="permalink">Unity programming(11)
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          less than 1 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">9장, 10장을 들어가기 전…
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/Unity-Programming(10)/" rel="permalink">Unity programming(10)
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          5 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">탄막 슈팅 게임’닷지’ - 최종 완성
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/Unity-Programming(9)/" rel="permalink">Unity programming(9)
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          4 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">탄막 슈팅 게임’닷지’ - 최종 완성
</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>
    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
      
        
      
        
      
        
      
        
      
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2022 Kim Namsub. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>










  </body>
</html>
